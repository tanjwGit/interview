 ## HTTP2
  - 多路复用技术(复用建立的TCP连接) 可以只通过一个 TCP 连接就可以传输所有的请求数据:
    - 解决了浏览器限制同一个域名下的请求数量的问题;
    - 更容易实现全速传输,(因为一个TCP连接的拥塞控制存在慢开始算法)

    - HTTP/2 中, 有两个非常重要的概念, 分别是帧（frame）和流（stream)、消息(message）
      - 消息(message)：一个完整的请求或者响应，比如请求、响应等，由一个或多个 Frame 组成
      - 帧代表着最小的数据单位, 每个帧会标识出该帧属于哪个流, 流也就是多个帧组成的数据流。
        - 类型 type
        - 长度 length
        - 标记 flags
        - 流标识 stream
        - 有效载荷 frame payload
      - 流
        - 是一个双向的虚拟信道，可以承载双向的消息传输，具有一个唯一的整数标识符
        - 为防止两端流id冲突，客户端发起的流具有奇数id, 服务端具有偶数id
      - 多路复用就是在一个 TCP 连接中可以存在多条流。 即多个请求;
      - 对端可以通过帧中的标识知道属于哪个请求; 避免 HTTP 旧版本中的队头阻塞问题, 极大的提高传输性能。
    - 允许通过一个连接发起多个请求、响应；
    - 基于分帧机制，不在依赖多个tcp连接实现多流并行
    - 每个数据流被拆分成互不依赖的帧，可以乱序发送，还可以区分优先级
      - html 优先级最高
      - css
      - js
      - 图片
    - 根据不同帧首部的流标识符，将不同的数据流组装起来;

  - 二进制传输: 加强性能的核心点
    - HTTP/1/1.1 是通过文本的方式传输数据,
    - HTTP/2 中引入了新的编码机制, 传输的数据都会被分割, 并采用二进制格式编码

  - Header 压缩
    -  HTTP/1 使用文本的形式传输 header, 如果携带 cookie , 每次都需要重复传输几百到几千的字节;
    - 在 HTTP /2 中
      - 使用了 HPACK 压缩格式对传输的 header 进行编码, 减少了 header 的大小;
      - 并在两端维护了索引表, 用于记录出现过的 header,后续在传输过程中可以只传输记录过的 header 的键名, 对端收到数据后就可以通过键名找到对应的值
        - 也有说法是携带索引表的索引位置
  - 服务端 Push
    - 服务端可以在客户端某个请求后, 主动推送其他资源
    - 推送遵循同源策略
    - 推送是基于客户端的请求响应来确定的
      - 比如 请求了一个html, 可能就会响应 样式表
      - 服务端主动推送某个资源时，会发送一个 frameType=PUSH_PROMISE的frame, 携带了需要新建的stream id
  - http2 存在的问题
    - tcp 丢包，会导致整个连接阻塞
    - 整个 TCP 都要开始等待重传, 导致了后面的所有数据都被阻塞



