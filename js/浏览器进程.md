
<!-- 摘选自 -->
<!-- https://zhuanlan.zhihu.com/p/489823633 -->
<!-- https://juejin.cn/post/7085366713281151012 -->


## 进程与线程是什么
    - 进程
      - CPU 资源分配的最小单位
      - 拥有资源和`独立运行`的最小单位
      - 进程之间不会共享资源
      - 多个进程可以进行通信，但代价较大
    - 线程
      - CPU 调度的最小单位
      - 是建立在进程的基础上的一次程序运行单位
      - 一个进程中有多个线程，多个线程可共享进程的资源

## 浏览器的进程与线程
  - 浏览器的进程
    - 浏览器是多进程
    - 每新开一个页签，就创建一个独立的进程
      - 1 个浏览器（Browser）主进程、1 个 GPU 进程、1 个网络（NetWork）进程、多个渲染进程和多个插件进程
  - 有哪些进程？
    - 主进程: 浏览器进程 Browser 进程
      - 只有一个，负责浏览器的协调、主控
      - 比如
        - 页面界面显示，与用户的交互、地址栏输入、前进、后退等
        - 页面管理、创建销毁进程 子进程的管理
        - 文件存储等
        - 页面内容写入到浏览器内存，将图像显示在屏幕上
    - 渲染进程(浏览器内核、renderer进程，多线程)
      - 默认情况下，一个tab页面有一个渲染进程，运行在沙箱模式下
      - 特殊情况下，不一定 一一对应
      - 作用: 页面渲染、脚本执行、事件处理等
      - 排版引擎Blink 和 JS引擎都在此进程中
    - GPU进程
      - 为实现CSS 的 3D效果，3D绘制等，将开启3D绘制的元素渲染由 CPU 转向 GPU, 即开启GPU 加速
      - 最多一个
      - 初始没有，后引入
    - 网络进程
      - 网络资源加载
      - 原是一个模块，后独立为一个单独的进程
    - 插件进程
      - 负责插件的运行，因为插件易崩溃，所以单独作为一个进程隔离
      - 每种类型的插件，对应一个进程
      - 仅使用时才创建
    - 音频进程
      - 浏览器的音频管理
  - 浏览器的线程
    - 线程主要存在于 渲染进程(浏览器内核) 中
    - 渲染进程
      - GUI 渲染线程
        - 渲染浏览器界面、解析 HTML、CSS、构建 DOM 树 和 RenderObject 树，布局和绘制
        - 重绘 或 回流 时，该线程也会工作
        - 与 JS 线程互斥
      - JS 引擎线程
        - JS 内核
        - 解析js脚本并执行，浏览器无论何时都只有一个JS线程运行js程序
        - 与 GUI 线程互斥，如果占用时间过长，会导致页面渲染卡顿
      - 事件触发线程
        - 事件触发线程归属于浏览器，而不是js引擎，用来控制事件循环（存在一个事件队列）
        - js引擎执行代码块时，如定时器、鼠标点击、异步请求等，会将对应的任务添加到事件线程中
        - 当对应事件符合出发条件被触发时，该线程会见事件添加到待处理队列的队尾，等待js 引擎的处理
        - 由于js 单线程，所以这些待处理的事件要排队等待JS 引擎的处理，即 事件循环机制
      - 定时触发器线程
        - setTimeout、 setinterval 所在线程
        - 浏览器定时器并不是由 js 引擎提供的
      - 异步HTTP请求线程(IO线程)
        - XMLhttpRequest 在连接后通过浏览器新开一个线程请求
        - 检测到状态变更时，异步线程会产生状态变更事件，将回调放入事队列（放入事件触发线程中）




## 浏览器多进程的好处？
  1. 避免单个页面崩溃影响整个浏览器
  2. 避免第三方插件崩溃时影响整个浏览器
  3. 多进程充分利用多核优势
  4. 方便使用沙盒模型隔离插件等进程，提高浏览器稳定性